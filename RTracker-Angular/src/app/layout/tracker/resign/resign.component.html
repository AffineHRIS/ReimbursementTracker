<div class="tracker-section">
    <h6 class="text-muted-header">Employee Profile</h6>
    <div class="horizontal-pipe-line"></div>

    <div class="tabs-details-container">
        <div class="tabs-list">
            <div class="row mt-3">
                <div class="col-sm-6 col-md-12">
                    <ul role="tablist" class="nav nav-tabs justify-content-start">
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/basic', employeeid]" href="javascript:void(0)">
                                BASIC INFORMATION
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/bank', employeeid]" href="javascript:void(0)">
                                BANK INFORMATION
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/family', employeeid]" href="javascript:void(0)">
                                FAMILY / RELATION
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/passport', employeeid]" href="javascript:void(0)">
                                PASSPORT / VISA
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/education', employeeid]" href="javascript:void(0)">
                                EDUCATION / CERTIFICATION
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/experience', employeeid]" href="javascript:void(0)">
                                EXPERIENCE
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/skills', employeeid]" href="javascript:void(0)">
                                SKILLS
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" [routerLink]="['/history', employeeid]" href="javascript:void(0)">
                                HISTORY
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="javascript:void(0)">
                                RESIGN
                            </a>
                        </li>
                    </ul>
                    <div class="resign-details tab-content">
                        <div class="tab-info tab-content tab-pane active">
                            <div class="row">
                                <div class="col-6">
                                    <div class="form-group">
                                        <div class="row">
                                            <label class="col-2"> Employee <span class="pull-right"> : </span> </label>
                                            <div class="col-6">
                                                <label class="text-value"> {{ employeename }} ( {{ employeeid }} ) </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <form novalidate #f="ngForm" (ngSubmit)="onApplyResign(f.value)" *ngIf="showApplyForm">
                                <div class="row">
                                    <div class="col-12">
                                        <h6 class="cus-h6">Apply</h6>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-2"> Manager <span class="pull-right"> : </span> </label>
                                                <div class="col-6">
                                                    <input class="form-control mr-sm-2" type="text"  name="Manager" [(ngModel)]="Manager" placeholder="Manger Name / ID" list="employees" required />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-2"> Comments <span class="pull-right"> : </span> </label>
                                                <div class="col-6">
                                                    <textarea class="form-control" name="Comment" [(ngModel)]="Comment" #name="ngModel" [disabled]="disableInputs" placeholder="Optional Comment / Remark"> </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-md-3"> Resignation Date <span class="pull-right"> : </span> </label>
                                                <div class="col-md-6">
                                                    <input type="date" class="form-control" name="Resign_Date" [ngModel]="Resign_Date | date: 'yyyy-MM-dd'" (ngModelChange)="Resign_Date=$event" required readonly />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-md-3"> Last Working Day <span class="pull-right"> : </span> </label>
                                                <div class="col-md-6">
                                                    <input type="date" class="form-control" name="Term_Date" [ngModel]="Term_Date | date: 'yyyy-MM-dd'" (ngModelChange)="Term_Date=$event" required readonly />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6"></div>
                                    <div class="col-6">
                                        <div class="row">
                                            <div class="col-9">
                                                <button class="btn btn-default btn-primary apply pull-right" type="submit"> Apply </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>

                            <div class="application-status-deatils" *ngIf="!showApplyForm">
                                <h6 class="cus-h6">Application Status</h6>
                                <table class="table table-bordered table-striped cus-table">
                                    <thead class="thead-inverse">
                                        <tr>
                                            <th> # </th>
                                            <th> Resignation Date </th>
                                            <th> Last Working Day </th>
                                            <th> Manager </th>
                                            <th> Status </th>
                                            <th> Comments / Remarks </th>
                                            <th> Updated Date </th>
                                            <th> Updated By </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-template ngFor let-applUpd [ngForOf]="applicationUpdates" let-i="index">
                                            <tr class="row-{{ i }}">
                                                <td> {{ i + 1 }} </td>
                                                <td> {{ applUpd.Resign_Date | date: 'dd-MMM-y' }} </td>
                                                <td> {{ applUpd.Last_Date | date: 'dd-MMM-y' }} </td>
                                                <td> {{ applUpd.Manager_Id }} </td>
                                                <td> {{ applUpd.Status }} </td>
                                                <td> {{ applUpd.Comment }} </td>
                                                <td> {{ applUpd.Updated_Date_Time | date: 'dd-MMM-y' }} </td>
                                                <td> {{ applUpd.Updated_By_Id }} </td>
                                            </tr>
                                        </ng-template>
                                    </tbody>
                                </table>
                                <div class="row" *ngIf="!showApplyUpdateForm">
                                    <div class="col-12">
                                        <button class="btn btn-default btn-primary update pull-right" type="update" (click)="onApplyUpdateForm()"> Update </button>
                                    </div>
                                </div>
                                <div class="" *ngIf="showApplyUpdateForm">
                                    <resign-update-form [detailsObj]="lastApplUpdate" [action]="actionApply"></resign-update-form>
                                </div>
                            </div>

                            <div class="approval-status-deatils" *ngIf="showApprUpdates">
                                <h6 class="cus-h6">Approvals</h6>
                                <table class="table table-bordered table-striped cus-table">
                                    <thead class="thead-inverse">
                                        <tr>
                                            <th> # </th>
                                            <th> Employee </th>
                                            <th> Resignation Date </th>
                                            <th> Last Working Day </th>
                                            <th> Manager </th>
                                            <th> Status </th>
                                            <th> Comments / Remarks </th>
                                            <th> Updated Date </th>
                                            <th> Updated By </th>
                                            <th> Edit </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-template ngFor let-apprUpd [ngForOf]="approvalUpdates" let-i="index">
                                            <tr class="row-{{ i }}">
                                                <td> {{ i + 1 }} </td>
                                                <td> {{ apprUpd.Employee_Id }} </td>
                                                <td> {{ apprUpd.Resign_Date | date: 'dd-MMM-y' }} </td>
                                                <td> {{ apprUpd.Last_Date | date: 'dd-MMM-y' }} </td>
                                                <td> {{ apprUpd.Manager_Id }} </td>
                                                <td> {{ apprUpd.Status }} </td>
                                                <td> {{ apprUpd.Comment }} </td>
                                                <td> {{ apprUpd.Updated_Date_Time | date: 'dd-MMM-y' }} </td>
                                                <td> {{ apprUpd.Updated_By_Id }} </td>
                                                <td [hidden]="hideForm(i)"> <i class="fa fa-pencil" (click)="showEditForm(i)"></i> </td>
                                                <td [hidden]="!hideForm(i)"> <i class="fa fa-times" (click)="cancelEditForm()"></i> </td>
                                            </tr>
                                            <tr [hidden]="!hideForm(i)">
                                                <td colspan="10">
                                                    <resign-update-form [detailsObj]="apprUpd" [action]="actionApprove"></resign-update-form>
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
